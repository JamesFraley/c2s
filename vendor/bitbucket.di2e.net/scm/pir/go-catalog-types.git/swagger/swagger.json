{
  "swagger": "2.0",
  "info": {
    "description": "Model definitions for 1.4 schema",
    "version": "1.4",
    "title": "Catalog 1.4 Model"
  },
  "definitions": {
    "CatalogRecord": {
      "type": "object",
      "description": "Schema for a Catalog Record",
      "required": [
        "id",
        "schemaVersion"
      ],
      "properties": {
        "id": {
          "description": "Id generated by Scout or Extractor or Source.  Otherwise autogenerated by Catalog Service",
          "type": "string"
        },
        "schemaVersion": {
          "description": "version of this schema the document was built",
          "type": "string"
        },
        "dataType": {
          "description": "identifier of the file type of data",
          "type": "string"
        },
        "searchDataType": {
          "description": "identifier of the search type of data",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "permissions": {
          "$ref": "#/definitions/Permissions"
        },
        "gspReleasable": {
          "description": "Boolean specifying that metadata and file can be published on GSP",
          "type": "boolean"
        },
        "meta": {
          "$ref": "#/definitions/Meta"
        },
        "locations": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Location"
          }
        },
        "history": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/History"
          }
        },
        "errors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Error"
          }
        }
      }
    },
    "Permissions": {
      "description": "Meta defines a high level description of data in a file.",
      "type": "object",
      "properties": {
        "read": {
          "description": "the group that has permission to read the file/metadata. null or public is everyone",
          "type": "string"
        },
        "write": {
          "description": "the group that has permission to write/update the file/metadata. null or public is everyone",
          "type": "string"
        },
        "delete": {
          "description": "the group that has permission to delete the file/metadata. null or public is everyone",
          "type": "string"
        }
      }
    },
    "Meta": {
      "description": "Meta defines a high level description of data in a file.",
      "type": "object",
      "properties": {
        "targets": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Target"
          }
        },
        "site": {
          "$ref": "#/definitions/Site"
        },
        "source": {
          "$ref": "#/definitions/Source"
        },
        "metaProducer": {
          "$ref": "#/definitions/MetaProducer"
        },
        "classification": {
          "$ref": "#/definitions/Classification"
        },
        "tasking": {
          "$ref": "#/definitions/Tasking"
        },
        "collection": {
          "$ref": "#/definitions/Collection"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "extensible": {
          "type": "string"
        },
        "start": {
          "description": "an ISO 8601 time the data begins, e.g. when a movie starts",
          "type": "string",
          "format": "date-time"
        },
        "end": {
          "description": "an ISO 8601 time the data ends, e.g. when a movie ends",
          "type": "string",
          "format": "date-time"
        },
        "created": {
          "description": "an ISO 8601 time the entire catalog record was created",
          "type": "string",
          "format": "date-time"
        },
        "updated": {
          "description": "an ISO 8601 time the entire catalog record was updated (such as when locations changed or metaExtensions added)",
          "type": "string",
          "format": "date-time"
        },
        "distribution": {
          "type": "string"
        },
        "dissementation": {
          "type": "string"
        },
        "comments": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "description": {
          "type": "string"
        },
        "geom": {
          "$ref": "#/definitions/Geom"
        }
      }
    },
    "Target": {
      "type": "object",
      "properties": {
        "targetName": {
          "description": "the name of the target per DefSMAC Standard Names",
          "type": "string"
        },
        "targetCode": {
          "description": "the targetCode.  This is a NASIC Legacy code used by Palette and specified in FEDs.",
          "type": "string"
        }
      }
    },
    "Site": {
      "type": "object",
      "properties": {
        "targetName": {
          "description": "the name of the site ",
          "type": "string"
        },
        "targetCode": {
          "description": "the siteCode.  This is a NASIC Legacy code used by Palette and specified in FEDs.",
          "type": "string"
        }
      }
    },
    "Source": {
      "description": "Source is an object containing source information.  It describes the originator of the file, such as sensor, agency, platform, etc, and information about the file as discovered by the system.",
      "type": "object",
      "properties": {
        "fileName": {
          "description": "the name of the original file",
          "type": "string"
        },
        "fileFormat": {
          "type": "string"
        },
        "fileSource": {
          "description": "Source of the data ...",
          "type": "string"
        },
        "productId": {
          "description": "a string identifying the id of the product from the source",
          "type": "string"
        },
        "countries": {
          "description": "ISO-3 Country Code",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "sensors": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "requirements": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "system": {
                "type": "string"
              },
              "id": {
                "type": "string"
              }
            }
          }
        },
        "agency": {
          "description": "The agency that created the file: NASIC etc...",
          "type": "string"
        },
        "provider": {
          "description": "Populated by scout: directory, s3, oracle ",
          "type": "string"
        },
        "deliveryTime": {
          "description": "an ISO 8601 time of the file delivery",
          "type": "string",
          "format": "date-time"
        },
        "discoveredTime": {
          "description": "an ISO 8601 time of the file discovery (e.g. when scout finds the file in the ftp dir)",
          "type": "string",
          "format": "date-time"
        },
        "uri": {
          "description": "the originating uri.  This could be a local file, an S3, or other (such as ftp / http).",
          "type": "string"
        },
        "fileSize": {
          "type": "integer"
        },
        "sha1Hash": {
          "description": "deprecated but can not remove",
          "type": "string"
        },
        "md5": {
          "type": "string"
        },
        "name": {
          "description": "a string name of the source, e.g. ground-station-X",
          "type": "string"
        }
      }
    },
    "MetaProducer": {
      "description": "Defines the originator of this meta section.",
      "type": "object",
      "properties": {
        "producer": {
          "$ref": "#/definitions/Producer"
        },
        "time": {
          "description": "The time the metadata extractor processed the file.",
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "Producer": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "node": {
          "type": "string"
        },
        "version": {
          "type": "string"
        }
      },
      "required": [
        "name"
      ]
    },
    "Classification": {
      "description": "The classification object contains the classification marking.  It also provides fields following the DDMS convention for classification.",
      "type": "object",
      "required": [
        "marking"
      ],
      "properties": {
        "marking": {
          "type": "string"
        },
        "classification": {
          "type": "string"
        },
        "ownerProducer": {
          "type": "string"
        },
        "classificationReason": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "classifiedBy": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "declassDate": {
          "type": "string",
          "format": "date-time"
        },
        "sciControls": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "disseminationControls": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "fgiSourceOpen": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "realeasableTo": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "Tasking": {
      "description": "Tasking is an object that describes groups the data is intended for, or missions it supports",
      "type": "object",
      "properties": {
        "taskName": {
          "type": "string"
        },
        "requirements": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "system": {
                "type": "string"
              },
              "id": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "Collection": {
      "description": "Collection is an object that describes collections the data belongs to, such as from a sensor",
      "type": "object",
      "properties": {
        "key": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "subType": {
          "type": "string"
        },
        "sensors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Sensor"
          }
        }
      }
    },
    "Sensor": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "class": {
          "type": "string"
        },
        "mode": {
          "type": "string"
        },
        "band": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "Geom": {
      "type": "object",
      "description": "One geometry as defined by GeoJSON, originally from https://github.com/fge/sample-json-schemas/tree/master/geojson, modified to include geometry collection. Only one of the properties below can be specified.",
      "properties": {
        "geomGeometryCollection": {
          "$ref": "#/definitions/GeometryCollection"
        },
        "geomPoint": {
          "$ref": "#/definitions/Point"
        },
        "geomMultiPoint": {
          "$ref": "#/definitions/MultiPoint"
        },
        "geomLineString": {
          "$ref": "#/definitions/LineString"
        },
        "geomMultiLineString": {
          "$ref": "#/definitions/MultiLineString"
        },
        "geomPolygon": {
          "$ref": "#/definitions/Polygon"
        },
        "geomMultiPolygon": {
          "$ref": "#/definitions/MultiPolygon"
        }
      }
    },
    "GeometryCollection": {
      "type": "object",
      "description": "A collection of geometry objects.",
      "required": [
        "geometries"
      ],
      "properties": {
        "geometries": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Geom"
          }
        }
      }
    },
    "Point": {
      "type": "object",
      "description": "",
      "required": [
        "coordinates"
      ],
      "properties": {
        "coordinates": {
          "$ref": "#/definitions/position"
        }
      }
    },
    "MultiPoint": {
      "type": "object",
      "description": "",
      "required": [
        "coordinates"
      ],
      "properties": {
        "coordinates": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/position"
          }
        }
      }
    },
    "LineString": {
      "type": "object",
      "description": "",
      "required": [
        "coordinates"
      ],
      "properties": {
        "coordinates": {
          "$ref": "#/definitions/lineString"
        }
      }
    },
    "MultiLineString": {
      "type": "object",
      "description": "",
      "required": [
        "coordinates"
      ],
      "properties": {
        "coordinates": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/lineString"
          }
        }
      }
    },
    "Polygon": {
      "type": "object",
      "description": "",
      "required": [
        "coordinates"
      ],
      "properties": {
        "coordinates": {
          "$ref": "#/definitions/polygon"
        }
      }
    },
    "MultiPolygon": {
      "type": "object",
      "required": [
        "coordinates"
      ],
      "properties": {
        "coordinates": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/polygon"
          }
        }
      }
    },
    "position": {
      "title": "position",
      "description": "A single position, 2 elements in array.",
      "type": "array",
      "items": {
        "type": "number"
      }
    },
    "lineString": {
      "title": "lineString",
      "description": "An array of two or more positions",
      "type": "array",
      "items": {
        "$ref": "#/definitions/position"
      }
    },
    "linearRing": {
      "title": "linearRing",
      "description": "An array of four positions where the first equals the last",
      "type": "array",
      "items": {
        "$ref": "#/definitions/position"
      }
    },
    "polygon": {
      "title": "polygon",
      "description": "An array of linear rings",
      "type": "array",
      "items": {
        "$ref": "#/definitions/linearRing"
      }
    },
    "Location": {
      "type": "object",
      "required": [
        "name",
        "uri"
      ],
      "properties": {
        "name": {
          "description": "a name identying the location, e.g. -s3 archive-, -apx gluster-, etc.",
          "type": "string"
        },
        "uri": {
          "type": "string"
        },
        "fileSize": {
          "type": "integer"
        },
        "validStart": {
          "description": "an ISO 8601 string for start date of location file being valid",
          "type": "string",
          "format": "date-time"
        },
        "validEnd": {
          "description": "an ISO 8601 string for end date location of file being valid (if location object is not to be removed from catalog record).",
          "type": "string",
          "format": "date-time"
        },
        "compression": {
          "type": "string"
        },
        "md5": {
          "type": "string"
        },
        "sha1": {
          "type": "string"
        }
      }
    },
    "History": {
      "type": "object",
      "properties": {
        "process": {
          "description": "a name identying the process that created/updated the file",
          "type": "string"
        },
        "version": {
          "description": "version of the process that created/updated the file",
          "type": "string"
        },
        "processTime": {
          "description": "an ISO 8601 string for start date of location file being valid",
          "type": "string",
          "format": "date-time"
        },
        "status": {
          "type": "string"
        }
      }
    },
    "Error": {
      "type": "object",
      "properties": {
        "process": {
          "description": "a name identying the process that created/updated the file",
          "type": "string"
        },
        "version": {
          "description": "version of the process that created/updated the file",
          "type": "string"
        },
        "errorTime": {
          "description": "an ISO 8601 string for start date of location file being valid",
          "type": "string",
          "format": "date-time"
        },
        "message": {
          "type": "string"
        }
      }
    }
  }
}
